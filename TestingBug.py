import Analysis
import Compute_Distortion
import sys
from scipy.optimize import minimize_scalar
from scipy.optimize import show_options
import unittest
import numpy as np

#When you run the values seem to ossiclate between 3 values, why is this happening..... Could be rounding?


'''
for i in range(100):
    ComputeDist = Compute_Distortion.DistortionCalculation("./TestData" , "3D Sag T1 BRAVO Geom Core") 
    ComputeDist.BinariseMethod = "Constant"
    ComputeDist.Threshold=int(3000)
    AnalysisObj = Analysis.AnalysisResults("No_Distortion",ComputeDist)
    ComputeDist.GetFudicalSpheres()
    
    #np.save("BugFixing/"+str(i)+"_Locs.npy",ComputeDist.SphereLocations)
    print(ComputeDist.SphereLocations)

    ComputeDist.GetDistances()
    AnalysisObj.DistortionAnalysis()

    print (AnalysisObj.Results['Interplate Max Distortion'][0],AnalysisObj.Results['Interplate Max Percentage Distortion'][0],AnalysisObj.Results['Interplate Coefficient Of Variation'])
    #np.save("NoDist.npy",AnalysisObj.Results,allow_pickle=True)

    TestResults = np.load("NoDist.npy",allow_pickle=True).item()     
'''


run1 = [[[183.60870665654264, 174.88812958744623, 84.7324727916983], [119.36915776986952, 263.3214709371293, 84.90889679715302], [188.49235474006116, 345.2910758965805, 86.14345287739783], [252.6862475981334, 
257.1334065330771, 86.02360691737579]], [[252.0771349862259, 256.3410969196093, 171.5359378913098], [187.90134075385782, 344.89375158107765, 171.53402479129775], [116.42351168048229, 177.54508917357447, 169.60889223813112], [118.9149952244508, 262.8192454632283, 170.2655205348615], [180.65809453832966, 88.84839578741122, 169.67352436933626], [249.8582124473561, 171.1059897051942, 170.77562002807673], 
[190.2782136391068, 429.9918527459264, 172.19281834640918], [318.84901166944513, 253.32769707073112, 171.85186949273637], [52.28471383723738, 266.04322627384687, 169.52209611205024], [254.47746835443039, 341.6875949367089, 171.9832911392405], [121.35446756425948, 348.05899632802937, 170.78702570379437], [183.04302845050552, 174.3320009405126, 170.1968022572302], [185.44841950502328, 259.6035285469248, 170.85150698358245]], [[120.82034474386987, 347.28817674192766, 255.8667152221413], [115.79665409990575, 176.82917059377945, 254.89820923656927], [318.27629016553067, 252.59225900681596, 256.8033106134372], [249.05151946818614, 170.51353276353277, 255.86942070275404], [256.2013404825737, 426.4187667560322, 257.76595174262735], [179.98975702715578, 88.42139113863745, 254.91186279180562], [51.726072607260726, 265.26426214049974, 254.5773220179161], [184.87203102278235, 258.8868153174988, 255.96921958313135], [123.28545595453372, 432.8375096874193, 256.50968741927153], [320.44313725490196, 338.15269607843135, 257.63676470588234], [315.7533317746084, 167.39279869067104, 256.1805003507131], [49.223847297967275, 180.12840852751611, 254.10485870104114], [54.218194412375894, 350.7365504502424, 255.09859154929578], [251.3766107464138, 255.68441526866036, 256.4891806467299], [246.68038207200587, 85.10115111437668, 255.42664707323047], [182.39417613636363, 173.46969696969697, 255.41761363636363], [113.35459246491013, 91.6816055158828, 254.21447919231716], [118.3073985680191, 261.98210023866346, 255.32553699284009], [253.82280431432974, 340.9789419619928, 257.20544427324086], [189.72605192479855, 429.49507609668757, 257.28021486123544], [187.38109912686184, 344.19106317411405, 256.6643554185927]], [[117.7393431167016, 261.1972979268577, 340.6040065222455], [248.53337969401946, 169.5048678720445, 341.14163189615203], [189.18418951290923, 428.4152249134948, 342.0702688315145], [250.85401108166707, 254.8793061912792, 341.7140448084799], [253.28305631356983, 340.1071694368643, 342.13619449268174], [181.8243777622703, 172.78111188648523, 340.63317050476854], [120.2124849939976, 346.4797118847539, 341.0124849939976], [179.36165273909006, 87.49814298978644, 340.0596564531105], [184.35980975029727, 258.01973840665875, 341.10868014268726], [51.086765386395186, 264.4345210550671, 339.90999537251275], [115.16982439926063, 175.94154343807764, 340.0268022181146], [317.38894277400584, 251.74199806013578, 342.0060620756547], [186.8266369047619, 343.1927083333333, 341.6312003968254]], [[183.72975734355046, 257.3134099616858, 426.77088122605363], [186.15817757009347, 342.64929906542056, 427.0927570093458], [181.22699104888684, 172.07000229515722, 426.3787009410145], [250.2034016775396, 254.38886300093196, 427.27889095992543], [117.0864426419467, 260.6723059096176, 426.24078794901504]]]
#Computing: No_Distortion
#0.4539283722220375 -0.6146744110059288 0.002549578229064604



run2= [[[188.49235474006116, 345.2910758965805, 86.14345287739783], [183.60870665654264, 174.88812958744623, 84.7324727916983], [119.36915776986952, 263.3214709371293, 84.90889679715302], [252.6862475981334, 
257.1334065330771, 86.02360691737579]], [[252.0771349862259, 256.3410969196093, 171.5359378913098], [187.90134075385782, 344.89375158107765, 171.53402479129775], [116.42351168048229, 177.54508917357447, 169.60889223813112], [118.9149952244508, 262.8192454632283, 170.2655205348615], [180.65809453832966, 88.84839578741122, 169.67352436933626], [249.8582124473561, 171.1059897051942, 170.77562002807673], 
[190.2782136391068, 429.9918527459264, 172.19281834640918], [318.84901166944513, 253.32769707073112, 171.85186949273637], [52.28471383723738, 266.04322627384687, 169.52209611205024], [254.47746835443039, 341.6875949367089, 171.9832911392405], [121.35446756425948, 348.05899632802937, 170.78702570379437], [183.04302845050552, 174.3320009405126, 170.1968022572302], [185.44841950502328, 259.6035285469248, 170.85150698358245]], [[54.218194412375894, 350.7365504502424, 255.09859154929578], [251.3766107464138, 255.68441526866036, 256.4891806467299], [113.35459246491013, 91.6816055158828, 254.21447919231716], [256.2013404825737, 426.4187667560322, 257.76595174262735], [179.98975702715578, 88.42139113863745, 254.91186279180562], [118.3073985680191, 261.98210023866346, 255.32553699284009], [315.7533317746084, 167.39279869067104, 256.1805003507131], [253.82280431432974, 340.9789419619928, 257.20544427324086], [115.79665409990575, 176.82917059377945, 254.89820923656927], [189.72605192479855, 429.49507609668757, 257.28021486123544], [120.82034474386987, 347.28817674192766, 255.8667152221413], [246.68038207200587, 85.10115111437668, 255.42664707323047], [249.05151946818614, 170.51353276353277, 255.86942070275404], [320.44313725490196, 338.15269607843135, 257.63676470588234], [318.27629016553067, 252.59225900681596, 256.8033106134372], [49.223847297967275, 180.12840852751611, 254.10485870104114], [51.726072607260726, 265.26426214049974, 254.5773220179161], [123.28545595453372, 432.8375096874193, 256.50968741927153], [184.87203102278235, 258.8868153174988, 255.96921958313135], [182.39417613636363, 173.46969696969697, 255.41761363636363], [187.38109912686184, 344.19106317411405, 256.6643554185927]], [[117.7393431167016, 261.1972979268577, 340.6040065222455], [248.53337969401946, 169.5048678720445, 341.14163189615203], [189.18418951290923, 428.4152249134948, 342.0702688315145], [250.85401108166707, 254.8793061912792, 341.7140448084799], [253.28305631356983, 340.1071694368643, 342.13619449268174], [181.8243777622703, 172.78111188648523, 340.63317050476854], [120.2124849939976, 346.4797118847539, 341.0124849939976], [179.36165273909006, 87.49814298978644, 340.0596564531105], [184.35980975029727, 258.01973840665875, 341.10868014268726], [51.086765386395186, 264.4345210550671, 339.90999537251275], [115.16982439926063, 175.94154343807764, 340.0268022181146], [317.38894277400584, 251.74199806013578, 342.0060620756547], [186.8266369047619, 343.1927083333333, 341.6312003968254]], [[183.72975734355046, 257.3134099616858, 426.77088122605363], [186.15817757009347, 342.64929906542056, 427.0927570093458], [181.22699104888684, 172.07000229515722, 426.3787009410145], [250.2034016775396, 254.38886300093196, 427.27889095992543], [117.0864426419467, 260.6723059096176, 426.24078794901504]]]
#Computing: No_Distortion
#0.4539283722220375 -0.6146744110059288 0.0025495782290646044


for slicenum in range(len(run1)):
    for point in run1[slicenum]:
        if point not in run2[slicenum]:
            print(point)
            sys.exit()

    for point in run2[slicenum]:
        if point not in run1[slicenum]:
            print(point)
            sys.exit()

